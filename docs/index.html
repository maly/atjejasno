<!doctype html>
<html>
	<head>
		<meta charset="utf-8">	
		<script>
			var questions = [
				{
					one: "Izrael",
					two: "Palestina"
				},
				{
					one: "Prchal",
					two: "Klus√°k"
				},
				{
					one: "Sparta",
					two: "Slavia"
				},
				{
					one: "Praha",
					two: "Brno"
				},

			]
		</script>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyBtA8TMpA9hJI_akkYi2CKzVFevrbkjjuQ",
    authDomain: "jasno-853c1.firebaseapp.com",
    databaseURL: "https://jasno-853c1.firebaseio.com",
    projectId: "jasno-853c1",
    storageBucket: "",
    messagingSenderId: "351735967255",
    appId: "1:351735967255:web:9713d9135decf63b"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>		
	</head>
<body>
	<script>
		document.write(window.location.search)

		var a = [0,1,2,3,2,1,1,2,3,0,1,2,0,1,3]

		var encode = ["-","*"];

		for (var i=0;i<26;i++) {
			encode.push(String.fromCharCode(i+65))
			encode.push(String.fromCharCode(i+97))
		}
		for (var i=0;i<10;i++) {
			encode.push(String.fromCharCode(i+48))
		}

		var atoc = function(a) {
			var out="";
			var p = 0;
			var q;
			//console.log(a.length)
			while((a.length-p+1)>3) {
				q = a[p]+4*a[p+1]+16*a[p+2];
				p+=3;
				out+=encode[q]
			}
			q = 0;
			//console.log(a.length,p)
			if (a.length>p) {
				q = a[p]
			}
			if (a.length>(p+1)) {
				q = q+a[p]*4
			}
			if (a.length>p) {
				out+=encode[q]
			}
			//console.log(q)
			return out
		}

		var ctoa = function(c) {
			var out = [];
			for (var i=0;i<c.length;i++) {
				var n = encode.indexOf(c.substr(i,1));
				//console.log(n,c.substr(i,1))
				out.push(n % 4);
				n = Math.floor(n/4);
				out.push(n % 4);
				n = Math.floor(n/4);
				out.push(n % 4);
			}
			return out
		}

		var quest = function(bold) {
			for (var i=0;i<questions.length;i++) {
				var q = questions[i];
				var a = bold[i];
				if (a===0) continue;

				console.log (q.one+", nebo "+q.two+"?",(a==1)?q.one:q.two)
			}
		}

		//--------

		var par = window.location.search;

		if (par.indexOf("?mix=")===0) {
			var bold = ctoa(par.substr(5))
			quest(bold)
		}

		console.log(atoc(a))


	
	var signtw = function() {
		var provider = new firebase.auth.TwitterAuthProvider();
		firebase.auth().signInWithPopup(provider).then(function(result) {
		  // This gives you a the Twitter OAuth 1.0 Access Token and Secret.
		  // You can use these server side with your app's credentials to access the Twitter API.
		  var token = result.credential.accessToken;
		  var secret = result.credential.secret;
		  // The signed-in user info.
		  var user = result.user;
		  console.log(user)
		  // ...
		}).catch(function(error) {
		  // Handle Errors here.
		  var errorCode = error.code;
		  var errorMessage = error.message;
		  // The email of the user's account used.
		  var email = error.email;
		  // The firebase.auth.AuthCredential type that was used.
		  var credential = error.credential;
		  // ...
		});
	}		
	</script>

	<button click="signtw()">TW SGN</button>
</body>
</html>
